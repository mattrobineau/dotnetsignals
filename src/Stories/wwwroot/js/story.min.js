!function(t,a,r){"use strict";function s(){var a={Title:t("#addstory .title").val(),Url:t("#addstory .url").val(),DescriptionMarkdown:t("#addstory .description").val(),IsAuthor:t("#addstory .isauthor").val()};return t.ajax({url:t("#addstory").data("url"),type:"POST",dataType:"json",data:a})}function n(a){return t.ajax({url:a.url,type:"POST",dataType:"json",data:a.form})}function d(a){return t.ajax({url:a.url,type:"POST",dataType:"json",data:a.body})}function e(a){var r=t("div#error");if(r.find(".error").remove(),!a||a.length<=0)return void(r.hasClass("hidden")||r.addClass("hidden"));r.hasClass("hidden")&&r.removeClass("hidden");for(var s=0;s<a.length;s++)r.append(t("<div></div>").addClass("error").append(t("<span></span>").text(a[s])))}t(function(){t("#addstory").on("click","button.submit",function(){return s().done(function(r){if(!1===r.status)return e(r.messages),!1;e(),a.location.href=t.QueryString.returnUrl}),!1}),t("#addstory").on("click","button.reset",function(){var a=t(this).closest("#addstory");a.find("input").each(function(){t(this).val("")}),a.find("textarea").each(function(){t(this).val("")}),a.find("input:checked").each(function(){t(this).attr("checked",!1)})}),t("div.story").on("click","i.fa-trash",function(){var r=t(this);n({url:r.closest("div.delete-story").data("url"),form:{hashId:r.closest("div.story").data("hashid")}}).success(function(t){return!1===t.status?(e(t.messages),!1):(e(),a.location.href="/",!1)})}),t("div.story").on("click","i.fa-flag",function(){var a=t(this);d({url:a.data("url"),body:{hashId:a.closest("div.story").data("hashid")}}).success(function(t){return!1===t.status?(e(t.messages),!1):(e(),!1)})})})}(window.jQuery,window,document);